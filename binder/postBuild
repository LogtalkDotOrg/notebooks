#!/bin/bash

set -e

python3 -m logtalk_kernel.install

git clone --depth 1 https://github.com/didoudiaz/gprolog
cd gprolog/src
./configure --prefix=/in-place && make && make install
echo 'export PATH=$PATH:$HOME/gprolog/bin' >> $HOME/.profile
cd ~

git clone --depth 1 --branch V9.1.6 https://github.com/SWI-Prolog/swipl-devel.git
cd swipl-devel
git submodule update --init
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=$HOME -G Ninja ..
ninja
ninja install
echo 'export PATH=$PATH:$HOME/bin' >> $HOME/.profile
cd ~

git clone --depth 1 --branch v2.10.12 https://github.com/trealla-prolog/trealla
cd trealla
make clean && make NOSSL=1
echo 'export PATH=$PATH:$HOME/trealla' >> $HOME/.profile
cd ~

mkdir eclipse
cd eclipse
wget http://eclipseclp.org/Distribution/CurrentRelease/7.1_13%20src%20Sources/eclipse_src.tgz
tar xpfz eclipse_src.tgz
cd Eclipse_7.1_13
export ECLIPSEARCH=x86_64_linux
export ARCH=x86_64_linux
export ECLIPSETHIRDPARTY=/usr/lib
./configure --without-osi --without-cplex --without-xpress --without-gurobi --without-gfd --without-java --without-flexlm --without-graphviz --without-mysql --without-cpviz
make -f Makefile.$ECLIPSEARCH
echo 'export PATH=$PATH:$HOME/eclipse/Eclipse_7.1_13/bin/x86_64_linux' >> $HOME/.profile
cd ~

#git clone --depth 1 https://github.com/vscosta/yap
#cd yap
#mkdir build
#cd build
#cmake .. && make
#echo 'export PATH=$PATH:$HOME/yap/build' >> $HOME/.profile
#cd ~

git clone --depth 1 https://github.com/LogtalkDotOrg/logtalk3.git

echo 'export LOGTALKHOME=$HOME/logtalk3' >> $HOME/.profile
echo 'export LOGTALKUSER=$HOME/logtalk3' >> $HOME/.profile
echo 'export PATH=$PATH:$LOGTALKHOME/tools/diagrams' >> $HOME/.profile
echo 'export PATH=$PATH:$LOGTALKHOME/tools/lgtdoc/xml' >> $HOME/.profile
echo 'export PATH=$PATH:$LOGTALKHOME/scripts' >> $HOME/.profile
echo 'export PATH=$PATH:$LOGTALKHOME/integration' >> $HOME/.profile
echo 'export MANPATH=$MANPATH:$LOGTALKHOME/man' >> $HOME/.profile
